{% extends 'layouts/base.html' %}
{% block title %}Monitoramento de Alarmes{% endblock %}

{% block css %}
<link rel="stylesheet" href="{{ url_for('static', filename='styles/hmi/hmi.css') }}">
{% endblock %}

{% block content %}
<section class="alarm-monitor" aria-labelledby="alarm-monitor-title">
  <header class="alarm-monitor__header">
    <div>
      <h1 id="alarm-monitor-title">Monitoramento de alarmes</h1>
      <p>Visualize rapidamente os alarmes ativos, filtre por prioridade e localize ocorrências específicas.</p>
    </div>
    <div class="alarm-monitor__header-actions">
      <button id="refresh-alarms" class="btn btn-primary" type="button">Atualizar lista</button>
      <span id="alarm-last-updated" class="last-updated" role="status" aria-live="polite">Última atualização: --</span>
    </div>
  </header>

  <section class="alarm-summary" aria-label="Resumo dos alarmes ativos">
    <article class="summary-card">
      <h2>Total</h2>
      <p id="summary-total" class="summary-value">0</p>
    </article>
    <article class="summary-card critical">
      <h2>Críticos</h2>
      <p id="summary-critical" class="summary-value">0</p>
    </article>
    <article class="summary-card high">
      <h2>Alta prioridade</h2>
      <p id="summary-high" class="summary-value">0</p>
    </article>
    <article class="summary-card medium">
      <h2>Média prioridade</h2>
      <p id="summary-medium" class="summary-value">0</p>
    </article>
    <article class="summary-card low">
      <h2>Baixa prioridade</h2>
      <p id="summary-low" class="summary-value">0</p>
    </article>
  </section>

  <section class="alarm-filters" aria-label="Filtros de alarme">
    <label class="filter-control">
      <span>Buscar</span>
      <input id="alarm-search" type="search" placeholder="Mensagem, CLP ou registrador" autocomplete="off">
    </label>
    <label class="filter-control">
      <span>Prioridade</span>
      <select id="alarm-severity">
        <option value="all" selected>Todas</option>
        <option value="critical">Crítica</option>
        <option value="high">Alta</option>
        <option value="medium">Média</option>
        <option value="low">Baixa</option>
      </select>
    </label>
    <label class="filter-control">
      <span>Ordenar por</span>
      <select id="alarm-sort">
        <option value="priority">Prioridade</option>
        <option value="recent">Mais recentes</option>
        <option value="older">Mais antigos</option>
      </select>
    </label>
  </section>

  <section class="alarm-table" aria-live="polite">
    <table>
      <caption class="visually-hidden">Tabela de alarmes ativos</caption>
      <thead>
        <tr>
          <th scope="col">Prioridade</th>
          <th scope="col">Mensagem</th>
          <th scope="col">CLP</th>
          <th scope="col">Registrador</th>
          <th scope="col">Ativo desde</th>
          <th scope="col">Idade</th>
        </tr>
      </thead>
      <tbody id="alarm-table-body">
        <tr class="empty-row">
          <td colspan="6">Nenhum alarme ativo encontrado.</td>
        </tr>
      </tbody>
    </table>
  </section>
</section>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='scripts/hmi.js') }}" defer></script>
{% endblock %}
